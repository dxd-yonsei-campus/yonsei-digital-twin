---
import Layout from '@/layouts/Layout.astro';
import LanguagePicker from '@/components/landing/LanguagePicker';
import MapLink from '@/components/landing/MapLink';
import { campuses } from '@/types/map';

export function getStaticPaths() {
  return [{ params: { lang: 'en' } }, { params: { lang: 'ko' } }];
}

import { getLangFromUrl, useTranslations } from '@/i18n/utils';
import { ChevronDown, Languages } from 'lucide-react';
import { languages } from '@/i18n/ui';
import ThemePicker from '@/components/ThemePicker';
import Footer from '@/components/Footer.astro';
import { Image } from 'astro:assets';

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);
---

<Layout>
  <div class="absolute top-0 right-0 bottom-0 left-0 -z-10">
    <Image
      src="/src/assets/landing-bg.png"
      alt="Background"
      class="h-full w-full object-cover"
      loading="eager"
      width={1920}
      height={1080}
      quality={80}
    />
    <div
      class="absolute top-0 right-0 bottom-0 left-0 bg-background/65 mask-r-from-30% mask-r-to-80% backdrop-blur-[1px]"
    >
    </div>
  </div>
  <div class="absolute top-8 left-4 flex items-center text-foreground/70">
    <LanguagePicker client:load lang={lang} align="start">
      <>
        <Languages className="size-4.5" />
        {languages[lang]}
        <ChevronDown className="size-3.5" />
      </>
    </LanguagePicker>
    <ThemePicker client:load />
  </div>
  <main
    class="flex h-svh w-full flex-col items-center justify-center gap-8 px-12"
  >
    <div class="min-w-none w-full text-left">
      <h1 class="text-4xl font-bold">{t('site.title')}</h1>
      <p class="mt-0.5 text-lg text-muted-foreground">
        {t('home.description')}
      </p>
      <div class="mt-4 flex flex-row justify-start gap-1.5">
        {
          campuses.map((campus) => {
            return <MapLink client:load campus={campus} lang={lang} />;
          })
        }
      </div>
    </div>
  </main>
  <Footer />
</Layout>
