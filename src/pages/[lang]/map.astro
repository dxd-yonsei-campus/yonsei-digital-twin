---
import 'mapbox-gl/dist/mapbox-gl.css';
import Layout from '@/layouts/Layout.astro';
import { getLangFromUrl, useTranslations } from '@/i18n/utils';
import { getCollection } from 'astro:content';
import Toaster from '@/components/map/Toaster';
import MapPage from '@/components/map/MapPage';

export function getStaticPaths() {
  return [{ params: { lang: 'en' } }, { params: { lang: 'ko' } }];
}

const lang = getLangFromUrl(Astro.url);
const t = useTranslations(lang);

const monthlyEnergyUseCollection = await getCollection('monthlyEnergyUse');
---

<Layout title={t('site.map')}>
  <h1 class="sr-only">{t('site.title')} {t('site.map')}</h1>
  <MapPage
    monthlyEnergyUseCollection={monthlyEnergyUseCollection}
    lang={lang}
    client:load
  />
  <Toaster client:load />
</Layout>
